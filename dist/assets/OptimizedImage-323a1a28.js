import{j as e}from"./index-0d9c4775.js";import{r as t}from"./vendor-6fa03c89.js";const s=({src:s,alt:r,className:a="",width:n,height:i,priority:o=!1,placeholder:l="blur",onLoad:c,...d})=>{const[u,m]=t.useState(!1),[h,f]=t.useState(o),[g,p]=t.useState(!1),x=t.useRef(null);t.useEffect(()=>{if(o)return;const e=new IntersectionObserver(([t])=>{t.isIntersecting&&(f(!0),e.disconnect())},{rootMargin:"50px 0px",threshold:.1});return x.current&&e.observe(x.current),()=>e.disconnect()},[o]);const b=(e=>{if(!e.includes("unsplash.com"))return e;const t=e.split("?")[0],s=new URLSearchParams;return n&&s.set("w",n),i&&s.set("h",i),s.set("fit","crop"),s.set("crop","faces,edges"),s.set("auto","format,compress"),s.set("q","85"),`${t}?${s.toString()}`})(s);return e.jsxs("div",{ref:x,className:`relative overflow-hidden ${a}`,style:{width:n,height:i},...d,children:[!u&&!g&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300 animate-pulse",style:{background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)"}}),(h||o)&&e.jsx("img",{src:b,alt:r,className:`\n            absolute inset-0 w-full h-full object-cover transition-opacity duration-500\n            ${u?"opacity-100":"opacity-0"}\n            ${g?"hidden":""}\n            optimized-image\n          `,loading:o?"eager":"lazy",decoding:"async",onLoad:()=>{m(!0),c&&c()},onError:()=>{p(!0)},width:n,height:i}),g&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-100 to-amber-200 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-amber-800",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),e.jsx("p",{className:"text-xs",children:"Image unavailable"})]})})]})};export{s as O};
